<!--æˆå°±é¡µé¢ - æˆå°±ç³»ç»Ÿå’Œå¾½ç« å±•ç¤ºç•Œé¢-->
<view class="achievements-page">
  <!-- è‡ªå®šä¹‰å¯¼èˆªæ  -->
  <view class="custom-navbar" style="padding-top: {{statusBarHeight}}px; height: {{navBarHeight}}px;">
    <view class="navbar-content">
      <text class="navbar-title">æˆå°±ç®¡ç†</text>
    </view>
  </view>

  <!-- æˆå°±ç³»ç»Ÿä¸»ä½“åŒºåŸŸ -->
  <scroll-view class="achievements-container" style="margin-top: {{navBarHeight + statusBarHeight}}px; height: calc(100vh - {{navBarHeight + statusBarHeight}}px);" scroll-y="true">
    <!-- æˆå°±ç»Ÿè®¡å¡ç‰‡ -->
    <view class="stats-card">
      <view class="stats-item">
        <text class="stats-number">{{totalAchievements}}</text>
        <text class="stats-label">æ€»æˆå°±</text>
      </view>
      <view class="stats-item">
        <text class="stats-number">{{unlockedCount}}</text>
        <text class="stats-label">å·²è§£é”</text>
      </view>
      <view class="stats-item">
        <text class="stats-number">{{completionRate}}%</text>
        <text class="stats-label">å®Œæˆç‡</text>
      </view>
      <view class="stats-item">
        <text class="stats-number">{{recentUnlocked}}</text>
        <text class="stats-label">æœ¬å‘¨æ–°å¢</text>
      </view>
    </view>

    <!-- æˆå°±åˆ—è¡¨å¡ç‰‡ -->
    <view class="achievements-list-card">
      <view class="section-header">
        <text class="section-title">æˆå°±åˆ—è¡¨</text>
        <text class="section-subtitle">{{achievements.length}} ä¸ªæˆå°±</text>
      </view>
      
      <view class="achievements-list">
        <view 
          wx:for="{{achievements}}"
          wx:key="id"
          class="achievement-item {{item.unlocked ? 'unlocked' : 'locked'}}"
          data-id="{{item.id}}"
          bindtap="viewAchievementDetail"
        >
      <!-- æˆå°±å›¾æ ‡ -->
      <view class="achievement-icon">
        <text class="icon-text {{item.unlocked ? '' : 'grayscale'}}">{{item.icon}}</text>
        <view wx:if="{{item.unlocked}}" class="unlock-badge">âœ“</view>
      </view>

      <!-- æˆå°±ä¿¡æ¯ -->
      <view class="achievement-info">
        <view class="achievement-header">
          <text class="achievement-name">{{item.name}}</text>
          <view class="difficulty-badge difficulty-{{item.difficulty}}">
            {{item.difficulty === 'easy' ? 'ç®€å•' : item.difficulty === 'medium' ? 'ä¸­ç­‰' : item.difficulty === 'hard' ? 'å›°éš¾' : 'ä¼ å¥‡'}}
          </view>
        </view>
        
        <text class="achievement-description">{{item.description}}</text>
        
        <!-- è¿›åº¦æ¡ -->
        <view class="progress-section">
          <view class="progress-bar">
            <view 
              class="progress-fill"
              style="width: {{item.target > 0 ? (item.progress / item.target * 100) : 0}}"
            ></view>
          </view>
          <text class="progress-text">{{item.progress}}/{{item.target}}</text>
        </view>
        
        <!-- å¥–åŠ±å’Œè§£é”æ—¶é—´ -->
        <view class="achievement-footer">
          <text class="reward-text">ğŸ {{item.reward}}åˆ†</text>
          <text wx:if="{{item.showUnlockTime}}" class="unlock-time">
            {{item.unlockedAt}}
          </text>
        </view>
      </view>
    </view>
  </view>

      <!-- ç©ºçŠ¶æ€ -->
      <view wx:if="{{isEmpty}}" class="empty-state">
        <text class="empty-icon">ğŸ†</text>
        <text class="empty-text">æš‚æ— ç¬¦åˆæ¡ä»¶çš„æˆå°±</text>
        <text class="empty-hint">å°è¯•è°ƒæ•´ç­›é€‰æ¡ä»¶</text>
      </view>
    </view>

    <!-- åˆ†äº«æŒ‰é’® -->
    <view class="share-section">
      <button class="share-btn" bindtap="shareAchievements">
        <text class="share-icon">ğŸ“¤</text>
        <text>åˆ†äº«æˆå°±</text>
      </button>
    </view>
  </scroll-view>
</view>